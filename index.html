<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="http://kitchingroup.cheme.cmu.edu/dft-book/">
<meta name="description" content="Examples of DFT calculations using vasp.Vasp and Python.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DFT blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://kitchingroup.cheme.cmu.edu/dft-book/">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/multiprocessing-with-vasp.py/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://kitchingroup.cheme.cmu.edu/dft-book/">

                <span id="blog-title">DFT blog</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="http://kitchingroup.cheme.cmu.edu/dft-book/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/multiprocessing-with-vasp.py/" class="u-url">Multiprocessing with vasp.py</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                John Kitchin
            </span></p>
            <p class="dateline"><a href="posts/multiprocessing-with-vasp.py/" rel="bookmark"><time class="published dt-published" datetime="2016-05-28T16:10:19-04:00" title="2016-05-28 16:10">2016-05-28 16:10</time></a></p>
                <p class="commentline">
        
    <a href="posts/multiprocessing-with-vasp.py/#disqus_thread" data-disqus-identifier="cache/posts/multiprocessing-with-vasp.py.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>
One of the reasons we use scripting is to setup, run and analyze a lot of calculations. Usually though, our scripts are serial, which means if we want to do ten things, we do them one at a time. We consider here how to use multiprocessing to speed things up. We consider a simple equation of state where we want 10 calculations at lattice constants from Â±10% of a base value. This isn't a definitive guide on multiprocessing or threads, just some working examples of what they do.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">
<span class="section-number-2">1</span> The serial case</h2>
<div class="outline-text-2" id="text-1">
<p>
We start with the serial case where each result is read one after another. This will give us a base case for how long it takes to read results when they are finished.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms
<span style="color: #0000FF;">import</span> time
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">t0</span> = time.time()

<span style="color: #BA36A5;">factors</span> = np.linspace(0.9, 1.1, 10)
<span style="color: #BA36A5;">a</span> = 3.6

<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'mp/serial-Cu-{}'</span>.<span style="color: #006FE0;">format</span>(i),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> xc=<span style="color: #008000;">'pbe'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> encut=300,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> kpts=[6, 6, 6],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> isym=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> atoms=Atoms([Atom(<span style="color: #008000;">'Cu'</span>,(0, 0, 0))],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> cell=0.5 * a * f * np.array([[1.0, 1.0, 0.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0.0, 1.0, 1.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [1.0, 0.0, 1.0]])))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> i, f <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(factors)]

<span style="color: #BA36A5;">energies</span> = [calc.potential_energy <span style="color: #0000FF;">for</span> calc <span style="color: #0000FF;">in</span> calcs]
<span style="color: #0000FF;">print</span>(energies)
<span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Elapsed-time = {0:1.1f} seconds'</span>.<span style="color: #006FE0;">format</span>(time.time() - t0))
</pre>
</div>

<pre class="example">
[-2.84280715, -3.21541663, -3.46563573, -3.62036549, -3.69449845, -3.71605521, -3.69440019, -3.64156925, -3.5622029, -3.464047]
Elapsed-time = 4.6 seconds
</pre>

<p>
Just under 5 seconds. Doesn't seem like a big deal, but suppose there were 1000 results, or you need to do this over and over. It might make sense to shorten this if possible. One way might be to run these in parallel. Each calculation is independent, so this should be easy.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">
<span class="section-number-2">2</span> Multiprocessing case</h2>
<div class="outline-text-2" id="text-2">
<p>
See <a href="https://docs.python.org/2/library/multiprocessing.html">https://docs.python.org/2/library/multiprocessing.html</a>. The key to multiprocessing is to create a function that does the work, and then create the threads to run the function. There are a couple of examples here. It might seem like more processes would finish faster, but it isn't always the case. It takes some time to create processes/threads. I found that just 2-3 processes gives close to the best performance, and more is not better for this example. This may be specific to this example, since it doesn't seem to take long to get the energy anyway.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">
<span class="section-number-3">2.1</span> Pool example</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms
<span style="color: #0000FF;">import</span> multiprocessing

<span style="color: #0000FF;">import</span> time
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">def</span> <span style="color: #006699;">worker</span>(arg):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">i</span>, <span style="color: #BA36A5;">f</span> = arg
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">a</span> = 3.6
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">atoms</span> = Atoms([Atom(<span style="color: #008000;">'Cu'</span>,(0, 0, 0))],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> cell=0.5 * a * f * np.array([[1.0, 1.0, 0.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0.0, 1.0, 1.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [1.0, 0.0, 1.0]]))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'mp/mp-pool-Cu-{}'</span>.<span style="color: #006FE0;">format</span>(i),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'pbe'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=300,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   kpts=[6, 6, 6],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   isym=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=atoms)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> calc.potential_energy

<span style="color: #0000FF;">if</span> <span style="color: #006FE0;">__name__</span> == <span style="color: #008000;">'__main__'</span>:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">t0</span> = time.time()

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">factors</span> = np.linspace(0.9, 1.1, 10)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">from</span> multiprocessing <span style="color: #0000FF;">import</span> Pool
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">p</span> = Pool(2)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">energies</span> = p.<span style="color: #006FE0;">map</span>(worker, <span style="color: #006FE0;">enumerate</span>(factors))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span> energies

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Elapsed-time = {0:1.1f} seconds'</span>.<span style="color: #006FE0;">format</span>(time.time() - t0))
</pre>
</div>

<pre class="example">
[-2.84280715, -3.21541663, -3.46563573, -3.62036549, -3.69449845, -3.71605521, -3.69440019, -3.64156925, -3.5622029, -3.464047]
Elapsed-time = 2.8 seconds
</pre>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">
<span class="section-number-3">2.2</span> ThreadPool example</h3>
<div class="outline-text-3" id="text-2-2">
<p>
This is basically like using threads but with multiprocessing.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms
<span style="color: #0000FF;">import</span> multiprocessing

<span style="color: #0000FF;">import</span> time
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">def</span> <span style="color: #006699;">worker</span>(i, f):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">a</span> = 3.6
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">atoms</span> = Atoms([Atom(<span style="color: #008000;">'Cu'</span>,(0, 0, 0))],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> cell=0.5 * a * f * np.array([[1.0, 1.0, 0.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0.0, 1.0, 1.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [1.0, 0.0, 1.0]]))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'mp/mp-threadpool-Cu-{}'</span>.<span style="color: #006FE0;">format</span>(i),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'pbe'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=300,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   kpts=[6, 6, 6],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   isym=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=atoms)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> calc.potential_energy

<span style="color: #BA36A5;">t0</span> = time.time()

<span style="color: #BA36A5;">factors</span> = np.linspace(0.9, 1.1, 10)

<span style="color: #0000FF;">from</span> multiprocessing.pool <span style="color: #0000FF;">import</span> ThreadPool
<span style="color: #BA36A5;">pool</span> = ThreadPool(processes=2)

<span style="color: #BA36A5;">energies</span> = [r.get() <span style="color: #0000FF;">for</span> r <span style="color: #0000FF;">in</span> [pool.apply_async(worker, (i, f))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> <span style="color: #0000FF;">for</span> i, f <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(factors)]]

<span style="color: #0000FF;">print</span>(energies)
<span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Elapsed-time = {0:1.1f} seconds'</span>.<span style="color: #006FE0;">format</span>(time.time() - t0))
</pre>
</div>

<pre class="example">
[-2.84280715, -3.21541663, -3.46563573, -3.62036549, -3.69449845, -3.71605521, -3.69440019, -3.64156925, -3.5622029, -3.464047]
Elapsed-time = 3.3 seconds
</pre>

<p>
Interesting, it isn't quite two times faster, but it is reproducibly faster.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">
<span class="section-number-2">3</span> Threading</h2>
<div class="outline-text-2" id="text-3">
<p>
Threads are a bit different than multiprocessing. For one, it doesn't come with a nice "pool" feature. We have to roll our own with a queue. I tried a few variations with this, and here is one that worked in the end. Another difference is we have to use a mutable list to capture the results. There is no way to "return" a value!
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms

<span style="color: #0000FF;">import</span> Queue
<span style="color: #0000FF;">import</span> threading

<span style="color: #0000FF;">import</span> time
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Worker</span>(threading.Thread):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">def</span> <span style="color: #006699;">__init__</span>(<span style="color: #0000FF;">self</span>, queue):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">self</span>.queue = queue
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   threading.Thread.__init__(<span style="color: #0000FF;">self</span>)
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">self</span>.daemon = <span style="color: #D0372D;">True</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">def</span> <span style="color: #006699;">run</span>(<span style="color: #0000FF;">self</span>):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">while</span> 1:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">item</span> = <span style="color: #0000FF;">self</span>.queue.get()
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">f</span>, <span style="color: #BA36A5;">energies</span>, <span style="color: #BA36A5;">index</span> = item
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">a</span> = 3.6
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">atoms</span> = Atoms([Atom(<span style="color: #008000;">'Cu'</span>,(0, 0, 0))],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> cell=0.5 * a * f * np.array([[1.0, 1.0, 0.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0.0, 1.0, 1.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [1.0, 0.0, 1.0]]))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'mp/queue-Cu-{}'</span>.<span style="color: #006FE0;">format</span>(index),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'pbe'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=300,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   kpts=[6, 6, 6],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   isym=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=atoms)

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">energies</span>[index] = calc.potential_energy
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   q.task_done()

<span style="color: #BA36A5;">t0</span> = time.time()
<span style="color: #BA36A5;">factors</span> = np.linspace(0.9, 1.1, 10)

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Setup our queue</span>
<span style="color: #BA36A5;">q</span> = Queue.Queue()
<span style="color: #BA36A5;">num_threads</span> = 2

<span style="color: #0000FF;">for</span> i <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">range</span>(num_threads):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   Worker(q).start()

<span style="color: #BA36A5;">energies</span> = [<span style="color: #D0372D;">None</span> <span style="color: #0000FF;">for</span> f <span style="color: #0000FF;">in</span> factors]
<span style="color: #0000FF;">for</span> i, f <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(factors):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   q.put([f, energies, i])

q.join()
<span style="color: #0000FF;">print</span>(energies)
<span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Elapsed-time = {0:1.1f} seconds'</span>.<span style="color: #006FE0;">format</span>(time.time() - t0))
</pre>
</div>

<pre class="example">
[-2.84280715, -3.21541663, -3.46563573, -3.62036549, -3.69449845, -3.71605521, -3.69440019, -3.64156925, -3.5622029, -3.464047]
Elapsed-time = 3.2 seconds
</pre>

<p>
Again, not notably faster if you add more threads. Your mileage could vary. The ThreadPoolExecutor is a little more convenient to use here, as it allows you to return something from the function. The syntax is a little heavy with the context manager.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms

<span style="color: #0000FF;">import</span> time
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np
<span style="color: #0000FF;">from</span> concurrent <span style="color: #0000FF;">import</span> futures

<span style="color: #0000FF;">def</span> <span style="color: #006699;">worker</span>(arg):
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">f</span>, <span style="color: #BA36A5;">index</span> = arg
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">a</span> = 3.6
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'mp/futures-Cu-{}'</span>.<span style="color: #006FE0;">format</span>(index),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'pbe'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=300,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   kpts=[6, 6, 6],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   isym=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=Atoms([Atom(<span style="color: #008000;">'Cu'</span>,(0, 0, 0))],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   cell=0.5 * a * f * np.array([[1.0, 1.0, 0.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>[0.0, 1.0, 1.0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>[1.0, 0.0, 1.0]])))

<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #0000FF;">return</span> calc.potential_energy

<span style="color: #BA36A5;">t0</span> = time.time()

<span style="color: #BA36A5;">factors</span> = np.linspace(0.9, 1.1, 10)

<span style="color: #0000FF;">with</span> futures.ThreadPoolExecutor(max_workers=2) <span style="color: #0000FF;">as</span> executor:
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">fs</span> = [executor.submit(worker, (f, i)) <span style="color: #0000FF;">for</span> i, f <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(factors)]
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #BA36A5;">energies</span> = [f.result() <span style="color: #0000FF;">for</span> f <span style="color: #0000FF;">in</span> futures.as_completed(fs)]

<span style="color: #0000FF;">print</span>(energies)
<span style="color: #0000FF;">print</span>(<span style="color: #008000;">'Elapsed-time = {0:1.1f} seconds'</span>.<span style="color: #006FE0;">format</span>(time.time() - t0))
</pre>
</div>

<pre class="example">
[-2.84280715, -3.21541663, -3.46563573, -3.62036549, -3.69449845, -3.71605521, -3.69440019, -3.64156925, -3.464047, -3.5622029]
Elapsed-time = 3.3 seconds
</pre>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">
<span class="section-number-2">4</span> Summary</h2>
<div class="outline-text-2" id="text-4">
<p>
This example didn't show the benefits of threading/multiprocessing very well. It is hard to get even two times faster with this example, and it plateaus out after 2-3 threads. I guess this is a feature of how fast each function evaluation is in the first place. Still, if you have code that is iterative and the iterations are independent and long-running, you might try this to see if you can get a real-time speed up. Take care if you are on a multi-user machine though, the other users might not appreciate you using all the cores and putting a heavy load on them ;)
</p>
</div>
</div>

<a href="media/multiprocessing-with-vasp.py/multiprocessing-with-vasp.py.org">org-source</a>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/bandstructures-in-vasppy/" class="u-url">Bandstructures in vasp.py</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                John Kitchin
            </span></p>
            <p class="dateline"><a href="posts/bandstructures-in-vasppy/" rel="bookmark"><time class="published dt-published" datetime="2016-05-27T19:13:58-04:00" title="2016-05-27 19:13">2016-05-27 19:13</time></a></p>
                <p class="commentline">
        
    <a href="posts/bandstructures-in-vasppy/#disqus_thread" data-disqus-identifier="cache/posts/bandstructure-post.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Calculating-a-bandstructure-with-vasp.py-and-an-IPython-notebook">Calculating a bandstructure with vasp.py and an IPython notebook<a class="anchor-link" href="posts/bandstructures-in-vasppy/#Calculating-a-bandstructure-with-vasp.py-and-an-IPython-notebook">Â¶</a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This post has three goals. 1) Show we can run simulations in the IPython notebook (instead of org-mode), second, to directly post the notebook to the dft-book blog, and finally to show how to calculate a band-structure.</p>
<p>First we import the vasp.py libraries we need.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">vasp</span> <span class="k">import</span> <span class="n">Vasp</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ase.lattice.surface</span> <span class="k">import</span> <span class="n">fcc111</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">slab</span> <span class="o">=</span> <span class="n">fcc111</span><span class="p">(</span><span class="s1">'Al'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">vacuum</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">slab</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Atoms(symbols='Al4', positions=..., tags=..., cell=[[2.8637824638055176, 0.0, 0.0], [1.4318912319027588, 2.4801083645679673, 0.0], [0.0, 0.0, 27.014805770653954]], pbc=[True, True, False])
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we setup and run a calculation. We need a base calculation to get the electron density from. Then, we will run a non-self-consistent calculation with a k-point path using that density.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">vasp.vasprc</span> <span class="k">import</span> <span class="n">VASPRC</span>
<span class="n">VASPRC</span><span class="p">[</span><span class="s1">'queue.nodes'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'n5'</span>  <span class="c1"># specify to run on node named n5</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">Vasp</span><span class="p">(</span><span class="s1">'../../Al-bandstructure'</span><span class="p">,</span>
            <span class="n">xc</span><span class="o">=</span><span class="s1">'pbe'</span><span class="p">,</span>
            <span class="n">encut</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">kpts</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
            <span class="n">lcharg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># We need the charge and wavefunctions for the second step</span>
            <span class="n">lwave</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">atoms</span><span class="o">=</span><span class="n">slab</span><span class="p">)</span>
<span class="n">calc</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># we need to wait for this to finish</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[4]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>-14.17006237</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Once the calculation is done, we can run the bandstructure calculation. We specify a path through k-space as a series of pairs of points, and the number of "intersections" we want on each path. This path has 4 segments, with 10 points on each segment.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">calc</span><span class="o">.</span><span class="n">get_bandstructure</span><span class="p">(</span><span class="n">kpts_path</span><span class="o">=</span><span class="p">[(</span><span class="s1">r'$\Gamma$'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">'$K1$'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">'$K1$'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">'$K2$'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">'$K2$'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">r'$\Gamma$'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">r'$\Gamma$'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
                                                <span class="p">(</span><span class="s1">'$K3$'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])],</span>
                                                 <span class="n">kpts_nintersections</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                                 <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0AaezcOclTFBsrN7FSpTx/RvENIkmoGB0tZacXLJCUKIpH/HqtA3IuKlWSxbU6o9UqkfW9egH//KcK%0AhZJ/gjKNRUTdiegIgLYAlhDRMgBg5l0AvgKwC8AyAIO99Q20WoGPPwZuuUXGbWfNUpEINI8+Cnz5%0AJdC9O/DMM5J3SMlJIK51bylRQh6WOnTQLARKwQjrgDtA5iIWLZIspzEx4gLbqlWQDSxinD4NjBkD%0AzJgBPP20pCgvXz7YVvlGpAXcMYu77LJl0ptYvVp6f0rRJqziKAoKEfETTzCSkoBdu4DGjYG335aA%0AOvXfDh6HDgFvvCER3DEx0rtr0iQ0vXI6dsz5lB2OQmGzASdO5Jyb2LtX0mrs2SOZX+vXBwYPVtdw%0ARShyQjFlCuOWW+THXrZssC1SnMnKkmI6SUmyXAy9eDs8/HDOeZVQF4ozZ2RyevNmyb+1d6+kgi9X%0AzuHxFBcneczq15dFI6AVV4qcUISj3UroEspCcdttjO3bxd21dWsZWm3QAKhZU3oNiuIt4ez1pCiK%0ACY89Jo4DGgukBAvtUSgKQrtHode64i/ye51rlhdFURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUK%0ARVEUxRQVCkVRFMUUFQpFURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUKRVEUxRQVCkVRFMUUFQpF%0AURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUKRVEUxRQVCkVR%0AFMUUFQpFURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUKRVEUxRQVCkVRFMUUFQpFURTFFBUKRVEU%0AxRQVCkVRFMWUoAgFEfUiop1ElE1EzZ3er0lEGUS0zVg+CoZ9iuIv9FpXIoFg9SiSAXQH8IubffuZ%0AuZmxDC5kuwpEYmJisE3IhdoUdELuWg/E/z9Q5zRcbA2XNvNLUISCmXcz895gfHcgCaUTa0dtCi6h%0AeK2H000tXGwNlzbzSyjOUcQZXfFEIuoQbGMUJYDota6EBSUC1TARrQBQ1c2uEcy8OI+PpQKIZebz%0AxnjuN0TUmJnTAmWnohQUvdaVSIeYOXhfTrQawAvMvNWX/UQUPKOViIWZKVBt67WuhAr5uc4D1qPw%0AgWtGE1FlAOeZOZuIagGoC+AP1w8E8getKAFEr3UlLAmWe2x3IjoCoC2AJUS0zNjVEcAOItoG4GsA%0A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">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The figure above shows why we only need $m \times n \times 1$ k-point meshes for slabs. From $\Gamma$ to $K3$ the bands are flat, so one k-point is sufficient to characterize the band energy in that direction (that is the z-direction in this calculation.).</p>
<p>That is basically it! I didn't find this as easy to use as Emacs + org-mode, but since I have 5+ years of skill with that, and a day of experience with this, that might be expected ;)</p>

</div>
</div>
</div>
    </div>
  </div>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/managing-queued-jobs-with-vasp.py/" class="u-url">Managing queued jobs with vasp.py</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                John Kitchin
            </span></p>
            <p class="dateline"><a href="posts/managing-queued-jobs-with-vasp.py/" rel="bookmark"><time class="published dt-published" datetime="2016-05-26T15:29:29-04:00" title="2016-05-26 15:29">2016-05-26 15:29</time></a></p>
                <p class="commentline">
        
    <a href="posts/managing-queued-jobs-with-vasp.py/#disqus_thread" data-disqus-identifier="cache/posts/managing-queued-jobs-with-vasp.py.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>
One of the reasons we use vasp.py is to make it easy to run a lot of calculations conveniently. vasp.py automatically submits jobs to the queue for us, and provides some job control features to make it wait until they are finished.
</p>

<p>
Sometimes things go wrong though, e.g. you realize you used the wrong parameter and suddenly you have a lot of jobs in the queue to stop. Not to worry, vasp.py can help you out. Each calculator stores a jobid on it, and vasp.py provides some support to interact with the queue system (assuming you use Torque or something compatible with it)!
</p>

<p>
Here is an example where we setup and run 10 calculations. The first time we run this, 10 jobs get submitted.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms
<span style="color: #0000FF;">import</span> matplotlib.pyplot <span style="color: #0000FF;">as</span> plt
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">bond_lengths</span> = np.linspace(1.05, 1.3, 10)

<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'molecules/co-n{0:02d}'</span>.<span style="color: #006FE0;">format</span>(i),  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">output dir</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'PBE'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   nbands=6,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=520,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   ismear=1,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   sigma=0.2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=Atoms([Atom(<span style="color: #008000;">'C'</span>, [0, 0, 0]),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>Atom(<span style="color: #008000;">'O'</span>, [d, 0, 0])],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   cell=(6, 6, 6)))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> i, d <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(bond_lengths)]

<span style="color: #BA36A5;">energies</span> = [calc.potential_energy <span style="color: #0000FF;">for</span> calc <span style="color: #0000FF;">in</span> calcs]

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Here are the jobids</span>
<span style="color: #0000FF;">print</span>([(c.jobid(), c.in_queue()) <span style="color: #0000FF;">for</span> c <span style="color: #0000FF;">in</span> calcs])

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Stop here until all calculations are done.</span>
Vasp.stop_if(<span style="color: #D0372D;">None</span> <span style="color: #0000FF;">in</span> energies)

<span style="color: #0000FF;">print</span>(energies)
</pre>
</div>

<pre class="example">
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n00 submitted: 1397279.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n01 submitted: 1397280.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n02 submitted: 1397281.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n03 submitted: 1397282.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n04 submitted: 1397283.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n05 submitted: 1397284.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n06 submitted: 1397285.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n07 submitted: 1397286.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n08 submitted: 1397287.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n09 submitted: 1397288.gilgamesh.cheme.cmu.edu
[(u'1397279.gilgamesh.cheme.cmu.edu', True), (u'1397280.gilgamesh.cheme.cmu.edu', True), (u'1397281.gilgamesh.cheme.cmu.edu', True), (u'1397282.gilgamesh.cheme.cmu.edu', True), (u'1397283.gilgamesh.cheme.cmu.edu', True), (u'1397284.gilgamesh.cheme.cmu.edu', True), (u'1397285.gilgamesh.cheme.cmu.edu', True), (u'1397286.gilgamesh.cheme.cmu.edu', True), (u'1397287.gilgamesh.cheme.cmu.edu', True), (u'1397288.gilgamesh.cheme.cmu.edu', True)]
</pre>

<p>
Say we just realize we wanted to delete these jobs, and change a parameter. We just get the calculators, and call qdel on each one like this:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">bond_lengths</span> = np.linspace(1.05, 1.3, 10)
<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'molecules/co-n{0:02d}'</span>.<span style="color: #006FE0;">format</span>(i))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> i, d <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(bond_lengths)]

<span style="color: #0000FF;">print</span>([calc.qdel() <span style="color: #0000FF;">for</span> calc <span style="color: #0000FF;">in</span> calcs])
</pre>
</div>

<pre class="example">
[(0, ''), (0, ''), (0, ''), (0, ''), (0, ''), (0, ''), (0, ''), (0, ''), (0, ''), (0, '')]
</pre>

<p>
All those 0's just means the job deletion succeeded. Now, we just have to adjust the original parameter set, and rerun the original script! That will resubmit the new jobs for us.
</p>

<p>
Here is the output from one of those calculations. Note the path is an org-link, so you can just click on it to open the directory if you run this in Emacs.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">print</span>(Vasp(<span style="color: #008000;">'molecules/co-n00'</span>))
</pre>
</div>

<pre class="example">
*************** VASP CALCULATION SUMMARY ***************
Vasp calculation directory:
---------------------------
  [[/home-research/jkitchin/dft-book/blog/source/org/molecules/co-n00]]

Unit cell:
----------
       x       y       z             |v|
  v0   6.000   0.000   0.000       6.000 Ang
  v1   0.000   6.000   0.000       6.000 Ang
  v2   0.000   0.000   6.000       6.000 Ang
  a,b,c,alpha,beta,gamma (deg): 6.000 6.000 6.000 90.0 90.0 90.0
  Total volume:                  216.000 Ang^3
  Stress:    xx     yy     zz     yz     xz     xy
         -0.071  0.001  0.001 -0.000 -0.000 -0.000 GPa

  ID  tag     sym    x        y        z    rmsF (eV/A)constraints (F=Frozen)
  0   0       C      0.000    0.000    0.000   14.97      T T T
  1   0       O      1.050    0.000    0.000   14.97      T T T
  Potential energy: -14.1779 eV

INPUT Parameters:
-----------------
  lcharg    : False
  pp        : PBE
  nbands    : 6
  xc        : pbe
  ismear    : 1
  lwave     : False
  sigma     : 0.2
  kpts      : [1, 1, 1]
  encut     : 520

Pseudopotentials used:
----------------------
  C: potpaw_PBE/C/POTCAR (git-hash: ee4d8576584f8e9f32e90853a0cbf9d4a9297330)
  O: potpaw_PBE/O/POTCAR (git-hash: 592f34096943a6f30db8749d13efca516d75ec55)
</pre>

<p>
Here is a summary of the job control functions and queue commands built in to vasp.py.
</p>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">
<span class="section-number-2">1</span> vasp.py job control functions</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">
<span class="section-number-3">1.1</span> Vasp.run()</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Runs all stored calculators on the Vasp class.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #006FE0;">help</span>(Vasp.run)
</pre>
</div>

<pre class="example">
Help on method run in module vasp.vasp_core:

run(cls, wait=False) method of __builtin__.type instance
    Convenience function to run calculators.

    The default behavior is to exit after doing this. If wait is
    True, iy will cause it to wait with the default args to
    Vasp.wait.

    If wait is a dictionary, it will be passed as kwargs to
    Vasp.wait.
</pre>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">
<span class="section-number-3">1.2</span> calc.run()</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Runs the instance calculator.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">
<span class="section-number-3">1.3</span> Vasp.all()</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Returns whether all calculators are ready, e.g. with results.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #006FE0;">help</span>(Vasp.<span style="color: #006FE0;">all</span>)
</pre>
</div>

<pre class="example">
Help on method all in module vasp.vasp_core:

all(cls) method of __builtin__.type instance
    Returns if all calculators in the class are ready.
</pre>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">
<span class="section-number-3">1.4</span> Vasp.stop_if(condition)</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Aborts the script if condition is not truthy
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #006FE0;">help</span>(Vasp.stop_if)
</pre>
</div>

<pre class="example">
Help on method stop_if in module vasp.vasp_core:

stop_if(cls, condition) method of __builtin__.type instance
    Stops the program if condition is truthy.
</pre>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">
<span class="section-number-3">1.5</span> Vasp.abort() and calc.abort()</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Aborts the script.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #006FE0;">help</span>(Vasp.abort)
</pre>
</div>

<pre class="example">
Help on method abort in module vasp.vasp_core:

abort(cls) method of __builtin__.type instance
    Abort and exit the program the calculator is running in.
</pre>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">
<span class="section-number-3">1.6</span> Vasp.wait() and calc.wait()</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Allows a real time-elapsed wait for jobs to finish. This blocks the script.
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #006FE0;">help</span>(Vasp.wait)
</pre>
</div>

<pre class="example">
Help on method wait in module vasp.vasp_core:

wait(cls, poll_interval=5, timeout=None, abort=False) method of __builtin__.type instance
    Control function to wait until all calculators are ready.

    if abort is truthy, stop the program.

    Otherwise check the calculators every poll_interval seconds,
    up to timeout seconds later. If timeout is None, poll forever.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">
<span class="section-number-2">2</span> vasp.py queue commands</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">
<span class="section-number-3">2.1</span> calc.qstat(*options)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Gets information about the job.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'molecules/co-n09'</span>)

calc.qstat()
</pre>
</div>

<pre class="example">
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
1397268.gilgamesh         .../co-n09       jkitchin               0 R short
</pre>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">
<span class="section-number-3">2.2</span> calc.qalter(*options)</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Allows you to alter the queue parameters for a job.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'molecules/co-n09'</span>)

calc.qalter(<span style="color: #008000;">'-l'</span>, <span style="color: #008000;">'walltime=20:00:00'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">
<span class="section-number-3">2.3</span> calc.qdel(*options)</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Allows you to delete the job
</p>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">
<span class="section-number-3">2.4</span> calc.xterm()</h3>
<div class="outline-text-3" id="text-2-4">
<p>
This will pop up an xterm window in the directory of the calculation. There you can run commands and see what is going on.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'molecules/co-n00'</span>)

calc.xterm()
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5">
<span class="section-number-3">2.5</span> calc.qoutout()</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Returns contents of the queue output file if it exists. May be useful to debug.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">calc</span> = Vasp(<span style="color: #008000;">'molecules/co-n00'</span>)

<span style="color: #0000FF;">print</span>(calc.qoutput())
</pre>
</div>

<pre class="example">
xmodmap:  unable to open display ''
 vasp.5.3.5 31Mar14 (build Aug 04 2015 12:48:45) complex

 POSCAR found :  2 types and       2 ions
 LDA part: xc-table for Pade appr. of Perdew
 POSCAR found :  2 types and       2 ions
 POSCAR, INCAR and KPOINTS ok, starting setup
 WARNING: small aliasing (wrap around) errors must be expected
 FFT: planning ...
 WAVECAR not read
 WARNING: random wavefunctions but no delay for mixing, default for NELMDL
 entering main loop
       N       E                     dE             d eps       ncg     rms          rms(c)
DAV:   1     0.693510492725E+02    0.69351E+02   -0.29305E+03    12   0.855E+02
DAV:   2    -0.556930203939E+01   -0.74920E+02   -0.74931E+02    18   0.248E+02
DAV:   3    -0.151153850754E+02   -0.95461E+01   -0.95461E+01    12   0.964E+01
DAV:   4    -0.153607093341E+02   -0.24532E+00   -0.24532E+00    12   0.138E+01
DAV:   5    -0.153763439194E+02   -0.15635E-01   -0.15635E-01    24   0.343E+00    0.816E+00
DAV:   6    -0.144168400550E+02    0.95950E+00   -0.26887E+00    12   0.196E+01    0.429E+00
DAV:   7    -0.142207761391E+02    0.19606E+00   -0.48211E-01    18   0.795E+00    0.186E+00
DAV:   8    -0.142021024270E+02    0.18674E-01   -0.81621E-02    18   0.376E+00    0.582E-01
DAV:   9    -0.142016090043E+02    0.49342E-03   -0.11924E-02    12   0.136E+00    0.870E-02
DAV:  10    -0.142024449557E+02   -0.83595E-03   -0.55763E-04    12   0.268E-01    0.420E-02
DAV:  11    -0.142040155105E+02   -0.15706E-02   -0.43005E-04    18   0.201E-01    0.267E-02
DAV:  12    -0.142041222436E+02   -0.10673E-03   -0.11191E-04     6   0.106E-01    0.989E-03
DAV:  13    -0.142042422801E+02   -0.12004E-03   -0.26082E-05     6   0.587E-02    0.352E-03
DAV:  14    -0.142042518369E+02   -0.95569E-05   -0.35661E-06     6   0.202E-02
   1 F= -.14204252E+02 E0= -.14208117E+02  d E =0.115958E-01
</pre>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6">
<span class="section-number-3">2.6</span> Vasp.torque()</h3>
<div class="outline-text-3" id="text-2-6">
<p>
This command prints out an org-mode table with clickable links
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np

<span style="color: #BA36A5;">bond_lengths</span> = np.linspace(1.05, 1.3, 10)
<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'molecules/co-n{0:02d}'</span>.<span style="color: #006FE0;">format</span>(i))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> i, d <span style="color: #0000FF;">in</span> <span style="color: #006FE0;">enumerate</span>(bond_lengths)]

<span style="color: #0000FF;">print</span>(Vasp.torque())
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="left">
<col class="left">
<col class="left">
</colgroup>
<tbody>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n00</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397279.gilgamesh.cheme.cmu.edu">1397279.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397279.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n01</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397280.gilgamesh.cheme.cmu.edu">1397280.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397280.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n02</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397281.gilgamesh.cheme.cmu.edu">1397281.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397281.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n03</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397282.gilgamesh.cheme.cmu.edu">1397282.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397282.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n04</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397283.gilgamesh.cheme.cmu.edu">1397283.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397283.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n05</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397284.gilgamesh.cheme.cmu.edu">1397284.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397284.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n06</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397285.gilgamesh.cheme.cmu.edu">1397285.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397285.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n07</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397286.gilgamesh.cheme.cmu.edu">1397286.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397286.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n08</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397287.gilgamesh.cheme.cmu.edu">1397287.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397287.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
<tr>
<td class="left">
<a href="posts/managing-queued-jobs-with-vasp.py/xterm%20-e" cd ls>molecules/co-n09</a> <a href="posts/managing-queued-jobs-with-vasp.py/(find-file">dired</a>
</td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qstat%201397288.gilgamesh.cheme.cmu.edu">1397288.gilgamesh.cheme.cmu.edu</a></td>
<td class="left"><a href="posts/managing-queued-jobs-with-vasp.py/qdel%201397288.gilgamesh.cheme.cmu.edu">qdel</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<a href="media/managing-queued-jobs-with-vasp.py/managing-queued-jobs-with-vasp.py.org">org-source</a>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/job-control-in-vasp.py/" class="u-url">Job control in vasp.py</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                John Kitchin
            </span></p>
            <p class="dateline"><a href="posts/job-control-in-vasp.py/" rel="bookmark"><time class="published dt-published" datetime="2016-05-25T20:00:57-04:00" title="2016-05-25 20:00">2016-05-25 20:00</time></a></p>
                <p class="commentline">
        
    <a href="posts/job-control-in-vasp.py/#disqus_thread" data-disqus-identifier="cache/posts/job-control-in-vasp.py.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="posts/job-control-in-vasp.py/#sec-1">1. Output from first run</a></li>
</ul>
</div>
</div>

<p>
One of the things we often need to do in DFT calculations is setup a series of calculations, run them all, and then do some analysis. The new vasp.py helps us with this. We can create a list of calculators, and then run each one of them. We run all our jobs asynchronously in a queue system, with no real control over when they start and when they end. A challenge in this is we usually need some kind of way to stop the script after the jobs are started so we can wait for them to finish before proceeding with analysis.
</p>

<p>
We address this challenge by storing a reference to all calculators created on the Vasp class, and defining some class methods that can work on all of them. For example the Vasp.run method will run each calculator (which submits a job for each one to the queue system). The default behavior is then to exit, but we can also tell it to wait, which will cause it to periodically check if the calculations are done before proceeding. 
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">import</span> vasp
<span style="color: #006FE0;">help</span>(vasp.Vasp.run)
</pre>
</div>

<pre class="example">
Help on method run in module vasp.vasp_core:

run(cls, wait=False) method of __builtin__.type instance
    Convenience function to run calculators.
    
    The default behavior is to exit after doing this. If wait is
    True, iy will cause it to wait with the default args to
    Vasp.wait.
    
    If wait is a dictionary, it will be passed as kwargs to
    Vasp.wait.
</pre>

<p>
With our typical workflow of scripting in org-mode this is very convenient. We can write one script that sets up the calculations, runs them, and later when they are done, performs the analysis. We have to run this script two times. The first time submits the jobs and exits at the Vasp.run() line (see <a href="posts/job-control-in-vasp.py/#sec-1">Output from first run</a>). After the jobs are done, we run it a second time, and we get the results and make the plot! 
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase.lattice.cubic <span style="color: #0000FF;">import</span> BodyCenteredCubic

<span style="color: #BA36A5;">NUPDOWNS</span> = [4.0, 4.5, 5.0, 5.5, 6.0]

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">These are the same for all calculations.</span>
<span style="color: #BA36A5;">fixed_pars</span> = <span style="color: #006FE0;">dict</span>( xc=<span style="color: #008000;">'PBE'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  encut=200,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  kpts=[4, 4, 4],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  ispin=2,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  atoms=BodyCenteredCubic(directions=[[1, 0, 0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0, 1, 0],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  [0, 0, 1]],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  size=(1, 1, 1),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>  symbol=<span style="color: #008000;">'Fe'</span>))

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Prepare a list of calculators</span>
<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'bulk/Fe-bcc-fixedmagmom-{0:1.2f}'</span>.<span style="color: #006FE0;">format</span>(B),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> nupdown=B,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span> **fixed_pars)             
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> B <span style="color: #0000FF;">in</span> NUPDOWNS]

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">This will start each calculation, and if they are not ready abort the script.</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">If they are ready, we will get the energies.</span>
<span style="color: #BA36A5;">energies</span> = Vasp.run()  

<span style="color: #0000FF;">import</span> matplotlib.pyplot <span style="color: #0000FF;">as</span> plt
plt.plot(NUPDOWNS, energies)
plt.xlabel(<span style="color: #008000;">'Total Magnetic Moment'</span>)
plt.ylabel(<span style="color: #008000;">'Energy (eV)'</span>)
plt.savefig(<span style="color: #008000;">'Fe-fixedmagmom.png'</span>)
</pre>
</div>


<div class="figure">
<p><img src="media/job-control-in-vasp.py/Fe-fixedmagmom.png" alt="Fe-fixedmagmom.png"></p>
</div>

<p>
This style works especially well for our workflow with org-mode.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">
<a id="ID-c1e70db7-5227-4bc0-bd89-237f36af1637" name="ID-c1e70db7-5227-4bc0-bd89-237f36af1637"></a><span class="section-number-2">1</span> Output from first run</h2>
<div class="outline-text-2" id="text-1">
<p>
Here is the output of the script the first time I ran it. It just tells me that jobs have been submitted and are queued. The output is a bit verbose, because of the way the exception handling system works in vasp.py. Basically, there ends up being multiple calls to self.update before the script exits.
</p>

<pre class="example">
energy not in {}. Calc required.
energy not in {}. Calc required.
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-4.00 submitted: 1397190.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-4.00 Queued: 1397190.gilgamesh.cheme.cmu.edu
energy not in {}. Calc required.
energy not in {}. Calc required.
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-4.50 submitted: 1397191.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-4.50 Queued: 1397191.gilgamesh.cheme.cmu.edu
energy not in {}. Calc required.
energy not in {}. Calc required.
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-5.00 submitted: 1397192.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-5.00 Queued: 1397192.gilgamesh.cheme.cmu.edu
energy not in {}. Calc required.
energy not in {}. Calc required.
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-5.50 submitted: 1397193.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-5.50 Queued: 1397193.gilgamesh.cheme.cmu.edu
energy not in {}. Calc required.
energy not in {}. Calc required.
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-6.00 submitted: 1397194.gilgamesh.cheme.cmu.edu
/home-research/jkitchin/dft-book/blog/source/org/bulk/Fe-bcc-fixedmagmom-6.00 Queued: 1397194.gilgamesh.cheme.cmu.edu
</pre>
</div>
</div>

<a href="media/job-control-in-vasp.py/job-control-in-vasp.py.org">org-source</a>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/first-post-on-dft-book-blog/" class="u-url">First post on DFT book blog</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                John Kitchin
            </span></p>
            <p class="dateline"><a href="posts/first-post-on-dft-book-blog/" rel="bookmark"><time class="published dt-published" datetime="2016-05-24T21:43:38-04:00" title="2016-05-24 21:43">2016-05-24 21:43</time></a></p>
                <p class="commentline">
        
    <a href="posts/first-post-on-dft-book-blog/#disqus_thread" data-disqus-identifier="cache/posts/first-post-on-dft-book-blog.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>
We have a new rewrite of the vasp Python calculator (<a href="https://github.com/jkitchin/vasp">https://github.com/jkitchin/vasp</a>).  Most of <a href="https://github.com/jkitchin/dft-book">DFT-book</a> has been re-written with the new library to provide testing and examples. There are a lot of new ideas in it though, so I am creating this new blog for dft-book to try them out, discuss various design choices, and develop advanced methods in running DFT calculations. This is the first post!
</p>

<p>
One of the features it has is better support for things like list comprehensions in DFT calculations. Here is an example of that where we start with a list of bond lengths, create a list of calculators, and get the energy from each one. This one script sets up and runs the calculations. You can run it over and over, and it should simply retrieve the results once the calculations are finished.
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #0000FF;">from</span> vasp <span style="color: #0000FF;">import</span> Vasp
<span style="color: #0000FF;">from</span> ase <span style="color: #0000FF;">import</span> Atom, Atoms
<span style="color: #0000FF;">import</span> matplotlib.pyplot <span style="color: #0000FF;">as</span> plt

<span style="color: #BA36A5;">bond_lengths</span> = [1.05, 1.1, 1.15, 1.2, 1.25]

<span style="color: #BA36A5;">calcs</span> = [Vasp(<span style="color: #008000;">'molecules/co-{0}'</span>.<span style="color: #006FE0;">format</span>(d),  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">output dir</span>
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   xc=<span style="color: #008000;">'PBE'</span>,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   nbands=6,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   encut=350,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   ismear=1,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   sigma=0.01,
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   atoms=Atoms([Atom(<span style="color: #008000;">'C'</span>, [0, 0, 0]),
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>Atom(<span style="color: #008000;">'O'</span>, [d, 0, 0])],
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   cell=(6, 6, 6)))
<span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span>   <span style="color: #9B9B9B; background-color: #EDEDED;"> </span><span style="color: #0000FF;">for</span> d <span style="color: #0000FF;">in</span> bond_lengths]

<span style="color: #BA36A5;">energies</span> = [calc.potential_energy <span style="color: #0000FF;">for</span> calc <span style="color: #0000FF;">in</span> calcs]

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Stop here until all calculations are done.</span>
calcs[0].stop_if(<span style="color: #D0372D;">None</span> <span style="color: #0000FF;">in</span> energies)

plt.plot(energies)
plt.xlabel(<span style="color: #008000;">'Bond length ($\AA$)'</span>)
plt.ylabel(<span style="color: #008000;">'Energy (eV)'</span>)
plt.savefig(<span style="color: #008000;">'test.png'</span>)
</pre>
</div>


<div class="figure">
<p><img src="media/first-post-on-dft-book-blog/test.png" alt="test.png"></p>
<p><span class="figure-number">Figure 1:</span> Energy vs. bond-length for the CO molecule.</p>
</div>

<a href="media/first-post-on-dft-book-blog/first-post-on-dft-book-blog.org">org-source</a>
    </div>
    </article>
</div>



        
       <script>var disqus_shortname="dftbook";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
            MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
            </script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2016         <a href="mailto:jkitchin@andrew.cmu.edu">John Kitchin</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35731398-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
